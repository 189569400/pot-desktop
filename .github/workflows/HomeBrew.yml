on:
  workflow_dispatch:
    inputs:
      tag-name:
        description: 'The git tag name to bump the formula to'
        required: true

jobs:
  homebrew:
    name: Update Homebrew cask
    runs-on: ubuntu-latest
    steps:
      - name: Set up Homebrew
        uses: Homebrew/actions/setup-homebrew@master
      - name: Set up Git
        run: |
          sudo apt-get install git -y
          git config --global user.email pylogmon@outlook.com
          git config --global user.name Pylogmon
      - name: Update Homebrew cask
        env:
          HOMEBREW_GITHUB_API_TOKEN: ${{ secrets.TOKEN }}
        run: |
          brew tap pot-app/homebrew-tap
          brew bump-cask-pr pot --version ${{ github.event.inputs.tag-name }}